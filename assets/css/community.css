/* =========================================================
   è™šç©ºæ¢¦è¯­ 3.0 ç¤¾åŒºæ ·å¼è¡¨ (Community Stylesheet) - ä¿®å¤ç‰ˆ
   ========================================================= */

/* --- 1. åŸºç¡€ç¯å¢ƒ --- */
:root {
    --void-bg: #0b0c10;
    --pale-text: #c5c6c7;
    --soul-blue: #66fcf1;
    --stone-border: #45a29e;
    --card-bg: rgba(22, 27, 34, 0.7);
}

body {
    background-color: var(--void-bg);
    color: var(--pale-text);
    font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
    margin: 0; padding: 0;
    overflow-x: hidden; /* ğŸ›‘ é˜²æ­¢æ¨ªå‘æ»šåŠ¨æ¡å‡ºç° */
}

/* --- 2. å¸ƒå±€ç³»ç»Ÿ (æ ¸å¿ƒä¿®å¤) --- */
.container { padding: 0 20px; box-sizing: border-box; }

.community-layout {
    display: grid;
    grid-template-columns: 240px 1fr 240px; /* å·¦ ä¸­ å³ */
    gap: 25px;
    align-items: start;
    margin-top: 30px;
    max-width: 1280px;
    margin-left: auto;
    margin-right: auto;
    width: 100%;
    /* ğŸ›‘ å…³é”®ä¿®å¤ï¼šé˜²æ­¢ grid å®¹å™¨è¢«å­å…ƒç´ æ’‘çˆ† */
    min-width: 0; 
}

/* --- 3. å¸–å­å†…å®¹åŒºåŸŸ (Markdown çº¦æŸ) --- */
.post-card {
    background: #161b22;
    border: 1px solid #30363d;
    border-radius: 8px;
    padding: 20px;
    margin-bottom: 20px;
    
    /* ğŸ›‘ æ ¸å¿ƒä¿®å¤ç‚¹ï¼šå¡ç‰‡å†…éƒ¨ä¹Ÿè¦çº¦æŸ */
    max-width: 100%;
    box-sizing: border-box; 
    overflow-wrap: break-word; /* å¼ºåˆ¶é•¿å•è¯æ¢è¡Œ */
}

/* Markdown å†…å®¹æœ¬ä½“ */
.markdown-body {
    width: 100%; /* å æ»¡å¡ç‰‡ */
    max-width: 100%;
    line-height: 1.6;
    font-size: 1rem;
    overflow-wrap: break-word; /* å†æ¬¡ç¡®ä¿æ¢è¡Œ */
}

/* ğŸ›‘ æ ¸å¿ƒä¿®å¤ç‚¹ï¼šå›¾ç‰‡é™åˆ¶ */
.markdown-body img {
    display: block;
    max-width: 100%;    /* ç»ä¸æ¯”çˆ¶å®¹å™¨å®½ */
    height: auto;       /* é«˜åº¦è‡ªåŠ¨ï¼Œé˜²æ­¢å˜å½¢ */
    max-height: 500px;  /* é™åˆ¶æœ€å¤§é«˜åº¦ */
    object-fit: contain;
    border-radius: 6px;
    margin: 10px 0;
    border: 1px solid #30363d;
}

/* ğŸ›‘ æ ¸å¿ƒä¿®å¤ç‚¹ï¼šä»£ç å—é™åˆ¶ */
.markdown-body pre {
    background: #282c34;
    border-radius: 6px;
    padding: 12px;
    margin: 10px 0;
    border: 1px solid #30363d;
    
    /* å…³é”®ï¼šä»£ç å¤ªé•¿æ—¶ï¼Œæ˜¾ç¤ºæ¨ªå‘æ»šåŠ¨æ¡ï¼Œè€Œä¸æ˜¯æ’‘å¼€é¡µé¢ */
    max-width: 100%; 
    overflow-x: auto; 
    white-space: pre; 
}

.markdown-body code {
    font-family: 'Consolas', monospace;
    font-size: 0.9rem;
}

/* å¼•ç”¨å— */
.markdown-body blockquote {
    border-left: 4px solid #66fcf1;
    padding: 8px 12px;
    color: #8b949e;
    margin: 10px 0;
    background: rgba(102, 252, 241, 0.05);
}

/* æ ‡é¢˜ä¼˜åŒ– */
.markdown-body h1, .markdown-body h2 {
    border-bottom: 1px solid #30363d;
    padding-bottom: .3em;
    margin-top: 24px;
    margin-bottom: 16px;
    font-size: 1.5em;
}

/* --- 4. ä¾§è¾¹æ ä¸ç»„ä»¶ --- */
.side-card {
    background: #161b22;
    border: 1px solid #30363d;
    border-radius: 8px;
    padding: 15px;
    margin-bottom: 20px;
}
.side-card h4 {
    margin: 0 0 15px 0;
    color: #e0e0e0;
    border-bottom: 1px solid #30363d;
    padding-bottom: 10px;
}

/* æŒ‰é’®ç¾åŒ– */
.dream-btn {
    display: inline-block;
    padding: 10px 8px;
    color: #fff !important;
    background: linear-gradient(90deg, #66fcf1, #45a29e);
    border: none;
    border-radius: 25px;
    text-decoration: none;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s;
    text-align: center;
    box-shadow: 0 4px 15px rgba(102, 252, 241, 0.3);
}
.dream-btn:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(102, 252, 241, 0.5); }
.dream-btn.small { padding: 5px 15px; font-size: 0.85rem; }
.full-width { display: block; width: 100%; }

/* --- 5. è¾…åŠ©æ ·å¼ --- */
.channel-nav { display: flex; flex-direction: column; gap: 5px; }
.channel-item { display: flex; align-items: center; padding: 10px; color: #8b949e; text-decoration: none; border-radius: 6px; }
.channel-item:hover { background: rgba(255,255,255,0.05); color: #fff; }
.channel-item.active { background: rgba(102, 252, 241, 0.1); color: #66fcf1; border-left: 3px solid #66fcf1; }
.c-icon { margin-right: 10px; }

/* å‘å¸–åŒº */
.post-box { background: #161b22; border: 1px solid #30363d; border-radius: 8px; padding: 15px; margin-bottom: 25px; }
#post-content { width: 100%; height: 100px; background: #0d1117; border: 1px solid #30363d; color: #e6edf3; padding: 10px; border-radius: 4px; resize: vertical; box-sizing: border-box; }
.post-toolbar { display: flex; justify-content: space-between; margin-top: 10px; padding-top: 10px; border-top: 1px dashed #333; }
.tools-left { display: flex; align-items: center; gap: 10px; }
.channel-select { background: #0d1117; color: #c9d1d9; border: 1px solid #30363d; padding: 5px; border-radius: 4px; }
.tool-btn { background: none; border: none; color: #8b949e; cursor: pointer; }

/* åº•éƒ¨åŒºåŸŸ */
.post-footer { display: flex; justify-content: space-between; margin-top: 15px; padding-top: 15px; border-top: 1px solid #30363d; }
.action-btn { color: #8b949e; cursor: pointer; display: flex; gap: 5px; }
.action-btn:hover { color: #66fcf1; }

.user-info-mini { display: flex; gap: 10px; align-items: center; margin-bottom: 15px; }
.avatar-small { width: 48px; height: 48px; border-radius: 50%; object-fit: cover; }
.btn-outline { flex: 1; text-align: center; padding: 5px; border: 1px solid #333; border-radius: 4px; color: #aaa; text-decoration: none; margin-right: 5px;}
.btn-outline.red:hover { border-color: #ff6b6b; color: #ff6b6b; }

/* è¡¨æƒ…é¢æ¿ */
.emoji-panel { grid-template-columns: repeat(8, 1fr); gap: 5px; background: #161b22; padding: 10px; margin-top: 10px; border-radius: 8px; max-height: 200px; overflow-y: auto; }
.emoji-panel span { cursor: pointer; text-align: center; padding: 5px; font-size: 1.2rem; }
.emoji-panel span:hover { background: rgba(255,255,255,0.1); border-radius: 4px; }


/* =========================================================
   ğŸ“± ç§»åŠ¨ç«¯é€‚é… (Mobile Stack)
   ========================================================= */
@media (max-width: 768px) {
    .community-layout {
        display: grid;
        grid-template-columns: 220px 1fr 260px; /* å·¦ ä¸­ å³ */
        gap: 25px;
        align-items: start;
        margin-top: 30px;
        max-width: 1200px;
        margin-left: auto;
        margin-right: auto;
        width: 100%; /* ç¡®ä¿å®¹å™¨æœ¬èº«ä¸è¶…å®½ */
    }
    .sidebar-left { display: block !important; margin-bottom: 15px; }
    .sidebar-left .nav-card { padding: 10px; }
    .channel-nav { flex-direction: row; overflow-x: auto; white-space: nowrap; padding-bottom: 5px; }
    .channel-item { display: inline-flex; margin-right: 10px; background: #161b22; border: 1px solid #30363d; }
    .sidebar-left .user-card { display: none !important; } /* éšè—ä¾§è¾¹ç”¨æˆ·ä¿¡æ¯ï¼Œé˜²å åœ° */
    
    .feed-stream {
        min-width: 0; 
        width: 100%;
        overflow: hidden; /* åŒé‡ä¿é™©ï¼Œé˜²æ­¢æº¢å‡º */
    }
    
    .post-toolbar { flex-wrap: wrap; }
    .tools-left { width: 100%; margin-bottom: 10px; }
    .post-toolbar .dream-btn { width: 100%; padding: 10px; }
    
    .sidebar-right { display: block !important; margin-top: 30px; }
}